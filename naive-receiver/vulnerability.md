# Analyse de la vulnérabilité - Naive Receiver

## Contexte
Le système comporte deux contrats:
- `NaiveReceiverLenderPool`: Fournit des prêts flash avec un frais fixe de 1 ETH
- `FlashLoanReceiver`: Reçoit des prêts flash et rembourse le montant + frais

## Vecteur d'attaque
La fonction `flashLoan()` du pool est publique et ne restreint pas qui peut initier un prêt pour un receveur donné:
```solidity
function flashLoan(address payable borrower, uint256 borrowAmount) external nonReentrant { ... }
```

Couplé avec un frais fixe élevé (1 ETH) indépendant du montant emprunté, cela permet à n'importe qui de:
1. Appeler `flashLoan` ciblant un `FlashLoanReceiver` vulnérable
2. Forcer le receveur à payer 1 ETH de frais par appel
3. Répéter jusqu'à ce que le receveur soit vidé

## Détails techniques
- Le receveur vérifie uniquement que `msg.sender == pool`, mais pas qui a initialement appelé le pool
- Chaque appel prélève 1 ETH de frais, peu importe le montant emprunté (même 1 wei)
- Le receveur dispose de 10 ETH initialement, donc 10 appels consécutifs le vident complètement

## Diagramme du flux d'attaque
[Voir diagramme](./diagrams/naive-receiver-flow.png)